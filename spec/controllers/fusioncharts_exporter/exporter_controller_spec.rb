require 'rails_helper'

module FusionchartsExporter
  RSpec.describe ExporterController, :type => :controller do

    describe "POST #index" do

      before do
        params1 = { :charttype=>"mscolumn2d", :stream=>"<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns=\"http://www.w3.org/2000/svg\" height=\"400\" version=\"1.1\" width=\"600\"  id=\"raphael-paper-0\" style=\"overflow: hidden; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); -webkit-user-select: none; cursor: default; position: relative; top: -0.4375px; background-color: rgb(255, 255, 255);\"><style type=\"text/css\">#raphael-paper-0 .fusioncharts-yaxis-0-title {font-family:Helvetica Neue,Arial;font-size:10px;line-height:12px;font-weight:bold;font-style:normal;}#raphael-paper-0 .fusioncharts-yaxis-0-gridlabels .fusioncharts-label {font-family:Helvetica Neue,Arial;font-size:10px;line-height:12px;color:#333333;fill:#333333;}#raphael-paper-0 .fusioncharts-yaxis-1-gridlabels .fusioncharts-label {font-family:Helvetica Neue,Arial;font-size:10px;line-height:12px;color:#333333;fill:#333333;}#raphael-paper-0 .fusioncharts-xaxis-0-title {font-family:Helvetica Neue,Arial;font-size:10px;line-height:12px;font-weight:bold;font-style:normal;}#raphael-paper-0 .fusioncharts-xaxis-0-gridlabels .fusioncharts-label {font-family:Helvetica Neue,Arial;font-size:10px;color:#333333;line-height:12px;fill:#333333;}#raphael-paper-0 .fusioncharts-datalabels .fusioncharts-label {font-family:Helvetica Neue,Arial;font-size:10px;line-height:12px;font-weight:normal;font-style:normal;color:rgba(255,255,255,1);fill:rgba(255,255,255,1);}#raphael-paper-0 .fusioncharts-legend .fusioncharts-caption {text-anchor:middle;font-family:Helvetica Neue,Arial;font-size:9px;color:#333333;font-weight:bold;line-height:10.799999999999999px;fill:#333333;}#raphael-paper-0 .fusioncharts-legend .fusioncharts-legenditem {font-family:Helvetica Neue,Arial;font-size:10px;color:#666666;font-weight:normal;line-height:12px;fill:#666666;}#raphael-paper-0 .fusioncharts-caption {font-family:Helvetica Neue,Arial;color:#333333;font-size:14px;font-weight:bold;line-height:16.8px;fill:#333333;}#raphael-paper-0 .fusioncharts-subcaption {font-family:Helvetica Neue,Arial;color:#333333;font-size:14px;font-weight:normal;line-height:16.8px;fill:#333333;}</style><defs><clipPath id=\"E2B5B2DF-5726-463E-9904-B1F8596A3A56\"><rect x=\"66\" y=\"57\" width=\"519\" height=\"261\" transform=\"matrix(1,0,0,1,0,0)\"></rect></clipPath><linearGradient id=\"0-90-rgba_204_204_204_1__0-rgba_255_255_255_1__100\" x1=\"0\" y1=\"1\" x2=\"6.123233995736766e-17\" y2=\"0\"><stop offset=\"0%\" stop-color=\"#cccccc\" stop-opacity=\"1\"></stop><stop offset=\"100%\" stop-color=\"#ffffff\" stop-opacity=\"1\"></stop></linearGradient></defs><g class=\"raphael-group-1-background\"><rect x=\"0\" y=\"0\" width=\"600\" height=\"400\" stroke=\"none\" fill-opacity=\"0.5\" fill=\"#ffffff\" rx=\"0\" ry=\"0\" style=\"stroke: none; fill-opacity: 0.5; fill: rgb(255, 255, 255);\"></rect><rect x=\"0\" y=\"0\" width=\"600\" height=\"400\" stroke=\"#767575\" stroke-opacity=\"0.5\" stroke-width=\"0\" fill=\"none\" rx=\"0\" ry=\"0\" style=\"stroke: rgb(118, 117, 117); stroke-opacity: 0.5; fill: none;\"></rect></g><g class=\"raphael-group-12-canvas\"><rect x=\"66\" y=\"57\" width=\"519\" height=\"261\" rx=\"0\" ry=\"0\" stroke-width=\"0\" stroke=\"#545454\" stroke-opacity=\"1\" stroke-linejoin=\"miter\" fill=\"none\" style=\"stroke: rgb(84, 84, 84); stroke-opacity: 1; stroke-linejoin: miter; fill: none;\"></rect><rect x=\"66\" y=\"57\" width=\"519\" height=\"261\" rx=\"0\" ry=\"0\" stroke-width=\"0\" stroke=\"none\" fill-opacity=\"1\" fill=\"#ffffff\" style=\"stroke: none; fill-opacity: 1; fill: rgb(255, 255, 255);\"></rect></g><g class=\"raphael-group-15-axisbottom\"><g class=\"raphael-group-18-x-axis-bands\"></g><g class=\"raphael-group-24-y-axis-bands\"><rect x=\"66\" y=\"213.60000000000002\" width=\"519\" height=\"52.19999999999999\" fill-opacity=\"0\" fill=\"#eeeeee\" stroke-width=\"0\" rx=\"0\" ry=\"0\" stroke=\"#000000\" style=\"fill-opacity: 0; fill: rgb(238, 238, 238); stroke: rgb(0, 0, 0);\"></rect><rect x=\"66\" y=\"109.20000000000002\" width=\"519\" height=\"52.19999999999999\" fill-opacity=\"0\" fill=\"#eeeeee\" stroke-width=\"0\" rx=\"0\" ry=\"0\" stroke=\"#000000\" style=\"fill-opacity: 0; fill: rgb(238, 238, 238); stroke: rgb(0, 0, 0);\"></rect></g><g class=\"raphael-group-30-y-axis-bands\"></g><g class=\"raphael-group-20-x-axis-lines\"></g><g class=\"raphael-group-26-y-axis-lines\"><path d=\"M66,266.5L585,266.5\" stroke=\"#999999\" stroke-opacity=\"1\" stroke-width=\"1\" stroke-dasharray=\"1,2\" fill=\"none\" shape-rendering=\"crispEdges\" style=\"stroke: rgb(153, 153, 153); stroke-opacity: 1; fill: none; shape-rendering: crispedges;\"></path><path d=\"M66,214.5L585,214.5\" stroke=\"#999999\" stroke-opacity=\"1\" stroke-width=\"1\" stroke-dasharray=\"1,2\" fill=\"none\" shape-rendering=\"crispEdges\" style=\"stroke: rgb(153, 153, 153); stroke-opacity: 1; fill: none; shape-rendering: crispedges;\"></path><path d=\"M66,161.5L585,161.5\" stroke=\"#999999\" stroke-opacity=\"1\" stroke-width=\"1\" stroke-dasharray=\"1,2\" fill=\"none\" shape-rendering=\"crispEdges\" style=\"stroke: rgb(153, 153, 153); stroke-opacity: 1; fill: none; shape-rendering: crispedges;\"></path><path d=\"M66,109.5L585,109.5\" stroke=\"#999999\" stroke-opacity=\"1\" stroke-width=\"1\" stroke-dasharray=\"1,2\" fill=\"none\" shape-rendering=\"crispEdges\" style=\"stroke: rgb(153, 153, 153); stroke-opacity: 1; fill: none; shape-rendering: crispedges;\"></path><path d=\"M66,57.5L585,57.5\" stroke=\"#999999\" stroke-opacity=\"1\" stroke-width=\"1\" stroke-dasharray=\"1,2\" fill=\"none\" shape-rendering=\"crispEdges\" style=\"stroke: rgb(153, 153, 153); stroke-opacity: 1; fill: none; shape-rendering: crispedges;\"></path></g><g class=\"raphael-group-32-y-axis-lines\"></g><g class=\"fusioncharts-xaxis-0-gridlabels\"><text class=\"fusioncharts-label\" fill-opacity=\"1\" fill=\"#333333\" x=\"130.875\" y=\"335\" text-anchor=\"middle\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill-opacity: 1; fill: rgb(51, 51, 51); text-anchor: middle; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px; font-weight: normal; font-style: normal;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"normal\" font-style=\"normal\"><tspan dy=\"-2.3046875\" x=\"130.875\">Q1</tspan></text><text class=\"fusioncharts-label\" fill-opacity=\"1\" fill=\"#333333\" x=\"260.625\" y=\"335\" text-anchor=\"middle\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill-opacity: 1; fill: rgb(51, 51, 51); text-anchor: middle; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px; font-weight: normal; font-style: normal;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"normal\" font-style=\"normal\"><tspan dy=\"-2.3046875\" x=\"260.625\">Q2</tspan></text><text class=\"fusioncharts-label\" fill-opacity=\"1\" fill=\"#333333\" x=\"390.375\" y=\"335\" text-anchor=\"middle\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill-opacity: 1; fill: rgb(51, 51, 51); text-anchor: middle; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px; font-weight: normal; font-style: normal;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"normal\" font-style=\"normal\"><tspan dy=\"-2.3046875\" x=\"390.375\">Q3</tspan></text><text class=\"fusioncharts-label\" fill-opacity=\"1\" fill=\"#333333\" x=\"520.125\" y=\"335\" text-anchor=\"middle\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill-opacity: 1; fill: rgb(51, 51, 51); text-anchor: middle; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px; font-weight: normal; font-style: normal;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"normal\" font-style=\"normal\"><tspan dy=\"-2.3046875\" x=\"520.125\">Q4</tspan></text></g><g class=\"fusioncharts-yaxis-0-gridlabels\"><text class=\"fusioncharts-label\" fill=\"#333333\" x=\"60\" y=\"318\" text-anchor=\"end\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: end; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"undefined\" font-style=\"undefined\"><tspan dy=\"3.6953125\" x=\"60\">$0</tspan></text><text class=\"fusioncharts-label\" fill=\"#333333\" x=\"60\" y=\"265.8\" text-anchor=\"end\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: end; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"undefined\" font-style=\"undefined\"><tspan dy=\"3.6984375000000114\" x=\"60\">$6K</tspan></text><text class=\"fusioncharts-label\" fill=\"#333333\" x=\"60\" y=\"213.60000000000002\" text-anchor=\"end\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: end; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"undefined\" font-style=\"undefined\"><tspan dy=\"3.6937500000000227\" x=\"60\">$12K</tspan></text><text class=\"fusioncharts-label\" fill=\"#333333\" x=\"60\" y=\"161.4\" text-anchor=\"end\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: end; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"undefined\" font-style=\"undefined\"><tspan dy=\"3.6968750000000057\" x=\"60\">$18K</tspan></text><text class=\"fusioncharts-label\" fill=\"#333333\" x=\"60\" y=\"109.20000000000002\" text-anchor=\"end\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: end; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"undefined\" font-style=\"undefined\"><tspan dy=\"3.692187500000017\" x=\"60\">$24K</tspan></text><text class=\"fusioncharts-label\" fill=\"#333333\" x=\"60\" y=\"57\" text-anchor=\"end\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: end; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"undefined\" font-style=\"undefined\"><tspan dy=\"3.6953125\" x=\"60\">$30K</tspan></text></g><g class=\"fusioncharts-yaxis-1-gridlabels\"></g><g class=\"raphael-group-35-axis-name\"><text class=\"fusioncharts-yaxis-0-title\" x=\"0\" y=\"0\" fill-opacity=\"1\" fill=\"#333333\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(51, 51, 51); text-anchor: middle; font-size: 10px; stroke: none;\" transform=\"matrix(0,-1,1,0,17,187.5)\" font-size=\"10px\" stroke=\"none\"><tspan dy=\"9.5\" x=\"0\">Amount ($)</tspan></text><text class=\"fusioncharts-xaxis-0-title\" x=\"0\" y=\"0\" fill-opacity=\"1\" fill=\"#333333\" text-anchor=\"middle\" transform=\"matrix(1,0,0,1,325.5,340)\" font-size=\"10px\" stroke=\"none\" style=\"fill-opacity: 1; fill: rgb(51, 51, 51); text-anchor: middle; font-size: 10px; stroke: none;\"><tspan dy=\"9.5\" x=\"0\">Quarter</tspan></text></g><g class=\"raphael-group-55-axis-lines\"><path d=\"M66,318.5L585,318.5\" stroke=\"#999999\" stroke-opacity=\"1\" stroke-width=\"1\" fill=\"none\" style=\"stroke: rgb(153, 153, 153); stroke-opacity: 1; fill: none;\"></path></g></g><g class=\"raphael-group-2-dataset\"><g class=\"raphael-group-57-columns\" clip-path=\"url('#E2B5B2DF-5726-463E-9904-B1F8596A3A56')\"><rect x=\"80.5\" y=\"231.5\" width=\"50\" height=\"87\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#0075c2\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(0, 117, 194); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect><rect x=\"210.5\" y=\"217.5\" width=\"50\" height=\"101\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#0075c2\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(0, 117, 194); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect><rect x=\"340.5\" y=\"209.5\" width=\"50\" height=\"109\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#0075c2\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(0, 117, 194); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect><rect x=\"470.5\" y=\"187.5\" width=\"50\" height=\"131\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#0075c2\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(0, 117, 194); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect><rect x=\"130.5\" y=\"97.5\" width=\"50\" height=\"221\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#1aaf5d\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(26, 175, 93); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect><rect x=\"260.5\" y=\"58.5\" width=\"50\" height=\"260\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#1aaf5d\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(26, 175, 93); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect><rect x=\"390.5\" y=\"128.5\" width=\"50\" height=\"190\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#1aaf5d\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(26, 175, 93); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect><rect x=\"520.5\" y=\"84.5\" width=\"50\" height=\"234\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#1aaf5d\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(26, 175, 93); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect></g></g><g class=\"raphael-group-16-axistop\"><g class=\"raphael-group-17-x-axis-bands\"></g><g class=\"raphael-group-23-y-axis-bands\"></g><g class=\"raphael-group-29-y-axis-bands\"></g><g class=\"raphael-group-19-x-axis-lines\"></g><g class=\"raphael-group-25-y-axis-lines\"></g><g class=\"raphael-group-31-y-axis-lines\"></g><g class=\"fusioncharts-xaxis-0-gridlabels\"></g><g class=\"fusioncharts-yaxis-0-gridlabels\"></g><g class=\"fusioncharts-yaxis-1-gridlabels\"></g></g><g class=\"fusioncharts-datalabels\" transform=\"matrix(1,0,0,1,0,0)\"><text class=\"fusioncharts-label\" x=\"105.5\" y=\"249\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,-143.5,354.5)\"><tspan dy=\"3.5\" x=\"105.5\">$10K</tspan></text><text class=\"fusioncharts-label\" x=\"235.5\" y=\"239\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,-3.5,474.5)\"><tspan dy=\"3.5\" x=\"235.5\">$11.5K</tspan></text><text class=\"fusioncharts-label\" x=\"365.5\" y=\"231\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,134.5,596.5)\"><tspan dy=\"3.5\" x=\"365.5\">$12.5K</tspan></text><text class=\"fusioncharts-label\" x=\"495.5\" y=\"205\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,290.5,700.5)\"><tspan dy=\"3.5\" x=\"495.5\">$15K</tspan></text><text class=\"fusioncharts-label\" x=\"155.5\" y=\"119\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,36.5,274.5)\"><tspan dy=\"3.5\" x=\"155.5\">$25.4K</tspan></text><text class=\"fusioncharts-label\" x=\"285.5\" y=\"80\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,205.5,365.5)\"><tspan dy=\"3.5\" x=\"285.5\">$29.8K</tspan></text><text class=\"fusioncharts-label\" x=\"415.5\" y=\"150\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,265.5,565.5)\"><tspan dy=\"3.5\" x=\"415.5\">$21.8K</tspan></text><text class=\"fusioncharts-label\" x=\"545.5\" y=\"106\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,439.5,651.5)\"><tspan dy=\"3.5\" x=\"545.5\">$26.8K</tspan></text></g><g class=\"fusioncharts-legend\" transform=\"matrix(1,0,0,1,233.5,360.5)\"><rect x=\"0\" y=\"0\" width=\"184\" height=\"25\" rx=\"0\" ry=\"0\" stroke=\"#545454\" stroke-opacity=\"0\" stroke-width=\"1\" fill-opacity=\"0\" fill=\"#ffffff\" style=\"stroke: rgb(84, 84, 84); stroke-opacity: 0; fill-opacity: 0; fill: rgb(255, 255, 255);\"></rect><text class=\"fusioncharts-legenditem\" x=\"23\" y=\"6.5\" fill=\"#666666\" text-anchor=\"start\" font-size=\"10px\" stroke=\"none\" style=\"fill: rgb(102, 102, 102); text-anchor: start; cursor: pointer; font-size: 10px; stroke: none;\"><tspan dy=\"9.5\" x=\"23\">Previous Year</tspan></text><path d=\"M7,18L7,10.3L9.75,10.3L9.75,18ZM11.125,18L11.125,7L13.875,7L13.875,18ZM15.25,18L15.25,13.6L18,13.6L18,18Z\" stroke-width=\"0.5\" stroke=\"#66acda\" fill-opacity=\"1\" fill=\"#0075c2\" style=\"stroke: rgb(102, 172, 218); fill-opacity: 1; fill: rgb(0, 117, 194); cursor: pointer;\"></path><rect x=\"4\" y=\"4\" width=\"84\" height=\"17\" rx=\"0\" ry=\"0\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" stroke-width=\"1\" stroke=\"none\" style=\"fill-opacity: 0.000001; fill: rgb(192, 192, 192); stroke: none; cursor: pointer;\"></rect><text class=\"fusioncharts-legenditem\" x=\"117.85\" y=\"6.5\" fill=\"#666666\" text-anchor=\"start\" font-size=\"10px\" stroke=\"none\" style=\"fill: rgb(102, 102, 102); text-anchor: start; cursor: pointer; font-size: 10px; stroke: none;\"><tspan dy=\"9.5\" x=\"117.85\">Current Year</tspan></text><path d=\"M101.85,18L101.85,10.3L104.6,10.3L104.6,18ZM105.975,18L105.975,7L108.725,7L108.725,18ZM110.1,18L110.1,13.6L112.85,13.6L112.85,18Z\" stroke-width=\"0.5\" stroke=\"#76cf9e\" fill-opacity=\"1\" fill=\"#1aaf5d\" style=\"stroke: rgb(118, 207, 158); fill-opacity: 1; fill: rgb(26, 175, 93); cursor: pointer;\"></path><rect x=\"98.85\" y=\"4\" width=\"79\" height=\"17\" rx=\"0\" ry=\"0\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" stroke-width=\"1\" stroke=\"none\" style=\"fill-opacity: 0.000001; fill: rgb(192, 192, 192); stroke: none; cursor: pointer;\"></rect></g><g class=\"raphael-group-90-caption\"><text class=\"fusioncharts-caption\" fill=\"#333333\" x=\"325.5\" y=\"15\" text-anchor=\"middle\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: middle; stroke: none; font-family: 'helvetica neue', arial; font-size: 14px; font-weight: bold;\" font-family=\"Helvetica Neue,Arial\" font-size=\"14px\" font-weight=\"bold\"><tspan dy=\"13.7109375\" x=\"325.5\">Comparison of Quarterly Revenue</tspan></text><text class=\"fusioncharts-subcaption\" fill=\"#333333\" x=\"325.5\" y=\"33\" text-anchor=\"middle\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: middle; stroke: none; font-family: 'helvetica neue', arial; font-size: 14px; font-weight: normal;\" font-family=\"Helvetica Neue,Arial\" font-size=\"14px\" font-weight=\"normal\"><tspan dy=\"13.5703125\" x=\"325.5\">Harry's SuperMart</tspan></text></g><g class=\"raphael-group-3-hot\"><rect x=\"80.5\" y=\"231.5\" width=\"50\" height=\"87\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect><rect x=\"210.5\" y=\"217.5\" width=\"50\" height=\"101\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect><rect x=\"340.5\" y=\"209.5\" width=\"50\" height=\"109\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect><rect x=\"470.5\" y=\"187.5\" width=\"50\" height=\"131\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect><rect x=\"130.5\" y=\"97.5\" width=\"50\" height=\"221\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect><rect x=\"260.5\" y=\"58.5\" width=\"50\" height=\"260\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect><rect x=\"390.5\" y=\"128.5\" width=\"50\" height=\"190\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect><rect x=\"520.5\" y=\"84.5\" width=\"50\" height=\"234\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect></g><g class=\"raphael-group-6-buttons\" style=\"display: none;\"><g class=\"raphael-group-7-button\"><rect x=\"572.5\" y=\"6.5\" width=\"18\" height=\"17\" rx=\"2\" ry=\"2\" fill=\"url('#0-90-rgba_204_204_204_1__0-rgba_255_255_255_1__100')\" stroke=\"#bbbbbb\" stroke-width=\"1\" opacity=\"1\" fill-opacity=\"1\" stroke-opacity=\"1\" style=\"stroke: rgb(187, 187, 187); opacity: 1; fill-opacity: 1; stroke-opacity: 1;\"></rect><path d=\"M576.5,17.5L576.5,20.5L587.5,20.5L587.5,17.5L587.5,20.5L576.5,20.5ZM581.5,19.5L578.5,15L580.5,15L580.5,9.5L582.5,9.5L582.5,15L584.5,15Z\" fill=\"#ffffff\" stroke=\"#9a9a9a\" fill-opacity=\"1\" stroke-opacity=\"1\" stroke-width=\"1\" style=\"fill: rgb(255, 255, 255); stroke: rgb(154, 154, 154); fill-opacity: 1; stroke-opacity: 1;\"></path><rect x=\"572.5\" y=\"6.5\" width=\"18\" height=\"17\" rx=\"2\" ry=\"2\" fill=\"#c0c0c0\" stroke=\"#c0c0c0\" fill-opacity=\"0.000001\" stroke-opacity=\"0.000001\" stroke-width=\"1\" style=\"fill: rgb(192, 192, 192); stroke: rgb(192, 192, 192); fill-opacity: 0.000001; stroke-opacity: 0.000001; cursor: pointer;\"></rect></g></g><text x=\"6\" y=\"396\" stroke=\"none\" fill=\"#000000\" text-anchor=\"start\" style=\"stroke: none; fill: rgb(0, 0, 0); text-anchor: start; fill-opacity: 0.5; font-size: 9px; font-family: verdana, sans; cursor: pointer;\" fill-opacity=\"0.5\" font-size=\"9px\" font-family=\"Verdana,sans\"><tspan dy=\"-1.8203125\" x=\"6\">FusionCharts XT Trial</tspan></text></svg>", :stream_type=>"svg", :meta_bgColor=>"#ffffff", :meta_bgAlpha=>"1", :meta_DOMId=>"chartobject-1", :meta_width=>"600", :meta_height=>"400", :parameters=>"exportfilename=FusionCharts|exportformat=svg|exportaction=download|exportparameters=undefined" }
        params2 = { :charttype=>"mscolumn2d", :stream=>"<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns=\"http://www.w3.org/2000/svg\" height=\"400\" version=\"1.1\" width=\"600\"  id=\"raphael-paper-0\" style=\"overflow: hidden; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); -webkit-user-select: none; cursor: default; position: relative; top: -0.4375px; background-color: rgb(255, 255, 255);\"><style type=\"text/css\">#raphael-paper-0 .fusioncharts-yaxis-0-title {font-family:Helvetica Neue,Arial;font-size:10px;line-height:12px;font-weight:bold;font-style:normal;}#raphael-paper-0 .fusioncharts-yaxis-0-gridlabels .fusioncharts-label {font-family:Helvetica Neue,Arial;font-size:10px;line-height:12px;color:#333333;fill:#333333;}#raphael-paper-0 .fusioncharts-yaxis-1-gridlabels .fusioncharts-label {font-family:Helvetica Neue,Arial;font-size:10px;line-height:12px;color:#333333;fill:#333333;}#raphael-paper-0 .fusioncharts-xaxis-0-title {font-family:Helvetica Neue,Arial;font-size:10px;line-height:12px;font-weight:bold;font-style:normal;}#raphael-paper-0 .fusioncharts-xaxis-0-gridlabels .fusioncharts-label {font-family:Helvetica Neue,Arial;font-size:10px;color:#333333;line-height:12px;fill:#333333;}#raphael-paper-0 .fusioncharts-datalabels .fusioncharts-label {font-family:Helvetica Neue,Arial;font-size:10px;line-height:12px;font-weight:normal;font-style:normal;color:rgba(255,255,255,1);fill:rgba(255,255,255,1);}#raphael-paper-0 .fusioncharts-legend .fusioncharts-caption {text-anchor:middle;font-family:Helvetica Neue,Arial;font-size:9px;color:#333333;font-weight:bold;line-height:10.799999999999999px;fill:#333333;}#raphael-paper-0 .fusioncharts-legend .fusioncharts-legenditem {font-family:Helvetica Neue,Arial;font-size:10px;color:#666666;font-weight:normal;line-height:12px;fill:#666666;}#raphael-paper-0 .fusioncharts-caption {font-family:Helvetica Neue,Arial;color:#333333;font-size:14px;font-weight:bold;line-height:16.8px;fill:#333333;}#raphael-paper-0 .fusioncharts-subcaption {font-family:Helvetica Neue,Arial;color:#333333;font-size:14px;font-weight:normal;line-height:16.8px;fill:#333333;}</style><defs><clipPath id=\"E2B5B2DF-5726-463E-9904-B1F8596A3A56\"><rect x=\"66\" y=\"57\" width=\"519\" height=\"261\" transform=\"matrix(1,0,0,1,0,0)\"></rect></clipPath><linearGradient id=\"0-90-rgba_204_204_204_1__0-rgba_255_255_255_1__100\" x1=\"0\" y1=\"1\" x2=\"6.123233995736766e-17\" y2=\"0\"><stop offset=\"0%\" stop-color=\"#cccccc\" stop-opacity=\"1\"></stop><stop offset=\"100%\" stop-color=\"#ffffff\" stop-opacity=\"1\"></stop></linearGradient></defs><g class=\"raphael-group-1-background\"><rect x=\"0\" y=\"0\" width=\"600\" height=\"400\" stroke=\"none\" fill-opacity=\"0.5\" fill=\"#ffffff\" rx=\"0\" ry=\"0\" style=\"stroke: none; fill-opacity: 0.5; fill: rgb(255, 255, 255);\"></rect><rect x=\"0\" y=\"0\" width=\"600\" height=\"400\" stroke=\"#767575\" stroke-opacity=\"0.5\" stroke-width=\"0\" fill=\"none\" rx=\"0\" ry=\"0\" style=\"stroke: rgb(118, 117, 117); stroke-opacity: 0.5; fill: none;\"></rect></g><g class=\"raphael-group-12-canvas\"><rect x=\"66\" y=\"57\" width=\"519\" height=\"261\" rx=\"0\" ry=\"0\" stroke-width=\"0\" stroke=\"#545454\" stroke-opacity=\"1\" stroke-linejoin=\"miter\" fill=\"none\" style=\"stroke: rgb(84, 84, 84); stroke-opacity: 1; stroke-linejoin: miter; fill: none;\"></rect><rect x=\"66\" y=\"57\" width=\"519\" height=\"261\" rx=\"0\" ry=\"0\" stroke-width=\"0\" stroke=\"none\" fill-opacity=\"1\" fill=\"#ffffff\" style=\"stroke: none; fill-opacity: 1; fill: rgb(255, 255, 255);\"></rect></g><g class=\"raphael-group-15-axisbottom\"><g class=\"raphael-group-18-x-axis-bands\"></g><g class=\"raphael-group-24-y-axis-bands\"><rect x=\"66\" y=\"213.60000000000002\" width=\"519\" height=\"52.19999999999999\" fill-opacity=\"0\" fill=\"#eeeeee\" stroke-width=\"0\" rx=\"0\" ry=\"0\" stroke=\"#000000\" style=\"fill-opacity: 0; fill: rgb(238, 238, 238); stroke: rgb(0, 0, 0);\"></rect><rect x=\"66\" y=\"109.20000000000002\" width=\"519\" height=\"52.19999999999999\" fill-opacity=\"0\" fill=\"#eeeeee\" stroke-width=\"0\" rx=\"0\" ry=\"0\" stroke=\"#000000\" style=\"fill-opacity: 0; fill: rgb(238, 238, 238); stroke: rgb(0, 0, 0);\"></rect></g><g class=\"raphael-group-30-y-axis-bands\"></g><g class=\"raphael-group-20-x-axis-lines\"></g><g class=\"raphael-group-26-y-axis-lines\"><path d=\"M66,266.5L585,266.5\" stroke=\"#999999\" stroke-opacity=\"1\" stroke-width=\"1\" stroke-dasharray=\"1,2\" fill=\"none\" shape-rendering=\"crispEdges\" style=\"stroke: rgb(153, 153, 153); stroke-opacity: 1; fill: none; shape-rendering: crispedges;\"></path><path d=\"M66,214.5L585,214.5\" stroke=\"#999999\" stroke-opacity=\"1\" stroke-width=\"1\" stroke-dasharray=\"1,2\" fill=\"none\" shape-rendering=\"crispEdges\" style=\"stroke: rgb(153, 153, 153); stroke-opacity: 1; fill: none; shape-rendering: crispedges;\"></path><path d=\"M66,161.5L585,161.5\" stroke=\"#999999\" stroke-opacity=\"1\" stroke-width=\"1\" stroke-dasharray=\"1,2\" fill=\"none\" shape-rendering=\"crispEdges\" style=\"stroke: rgb(153, 153, 153); stroke-opacity: 1; fill: none; shape-rendering: crispedges;\"></path><path d=\"M66,109.5L585,109.5\" stroke=\"#999999\" stroke-opacity=\"1\" stroke-width=\"1\" stroke-dasharray=\"1,2\" fill=\"none\" shape-rendering=\"crispEdges\" style=\"stroke: rgb(153, 153, 153); stroke-opacity: 1; fill: none; shape-rendering: crispedges;\"></path><path d=\"M66,57.5L585,57.5\" stroke=\"#999999\" stroke-opacity=\"1\" stroke-width=\"1\" stroke-dasharray=\"1,2\" fill=\"none\" shape-rendering=\"crispEdges\" style=\"stroke: rgb(153, 153, 153); stroke-opacity: 1; fill: none; shape-rendering: crispedges;\"></path></g><g class=\"raphael-group-32-y-axis-lines\"></g><g class=\"fusioncharts-xaxis-0-gridlabels\"><text class=\"fusioncharts-label\" fill-opacity=\"1\" fill=\"#333333\" x=\"130.875\" y=\"335\" text-anchor=\"middle\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill-opacity: 1; fill: rgb(51, 51, 51); text-anchor: middle; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px; font-weight: normal; font-style: normal;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"normal\" font-style=\"normal\"><tspan dy=\"-2.3046875\" x=\"130.875\">Q1</tspan></text><text class=\"fusioncharts-label\" fill-opacity=\"1\" fill=\"#333333\" x=\"260.625\" y=\"335\" text-anchor=\"middle\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill-opacity: 1; fill: rgb(51, 51, 51); text-anchor: middle; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px; font-weight: normal; font-style: normal;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"normal\" font-style=\"normal\"><tspan dy=\"-2.3046875\" x=\"260.625\">Q2</tspan></text><text class=\"fusioncharts-label\" fill-opacity=\"1\" fill=\"#333333\" x=\"390.375\" y=\"335\" text-anchor=\"middle\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill-opacity: 1; fill: rgb(51, 51, 51); text-anchor: middle; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px; font-weight: normal; font-style: normal;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"normal\" font-style=\"normal\"><tspan dy=\"-2.3046875\" x=\"390.375\">Q3</tspan></text><text class=\"fusioncharts-label\" fill-opacity=\"1\" fill=\"#333333\" x=\"520.125\" y=\"335\" text-anchor=\"middle\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill-opacity: 1; fill: rgb(51, 51, 51); text-anchor: middle; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px; font-weight: normal; font-style: normal;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"normal\" font-style=\"normal\"><tspan dy=\"-2.3046875\" x=\"520.125\">Q4</tspan></text></g><g class=\"fusioncharts-yaxis-0-gridlabels\"><text class=\"fusioncharts-label\" fill=\"#333333\" x=\"60\" y=\"318\" text-anchor=\"end\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: end; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"undefined\" font-style=\"undefined\"><tspan dy=\"3.6953125\" x=\"60\">$0</tspan></text><text class=\"fusioncharts-label\" fill=\"#333333\" x=\"60\" y=\"265.8\" text-anchor=\"end\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: end; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"undefined\" font-style=\"undefined\"><tspan dy=\"3.6984375000000114\" x=\"60\">$6K</tspan></text><text class=\"fusioncharts-label\" fill=\"#333333\" x=\"60\" y=\"213.60000000000002\" text-anchor=\"end\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: end; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"undefined\" font-style=\"undefined\"><tspan dy=\"3.6937500000000227\" x=\"60\">$12K</tspan></text><text class=\"fusioncharts-label\" fill=\"#333333\" x=\"60\" y=\"161.4\" text-anchor=\"end\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: end; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"undefined\" font-style=\"undefined\"><tspan dy=\"3.6968750000000057\" x=\"60\">$18K</tspan></text><text class=\"fusioncharts-label\" fill=\"#333333\" x=\"60\" y=\"109.20000000000002\" text-anchor=\"end\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: end; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"undefined\" font-style=\"undefined\"><tspan dy=\"3.692187500000017\" x=\"60\">$24K</tspan></text><text class=\"fusioncharts-label\" fill=\"#333333\" x=\"60\" y=\"57\" text-anchor=\"end\" transform=\"matrix(1,0,0,1,0,0)\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: end; stroke: none; font-family: 'helvetica neue', arial; font-size: 10px;\" font-family=\"Helvetica Neue,Arial\" font-size=\"10px\" font-weight=\"undefined\" font-style=\"undefined\"><tspan dy=\"3.6953125\" x=\"60\">$30K</tspan></text></g><g class=\"fusioncharts-yaxis-1-gridlabels\"></g><g class=\"raphael-group-35-axis-name\"><text class=\"fusioncharts-yaxis-0-title\" x=\"0\" y=\"0\" fill-opacity=\"1\" fill=\"#333333\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(51, 51, 51); text-anchor: middle; font-size: 10px; stroke: none;\" transform=\"matrix(0,-1,1,0,17,187.5)\" font-size=\"10px\" stroke=\"none\"><tspan dy=\"9.5\" x=\"0\">Amount ($)</tspan></text><text class=\"fusioncharts-xaxis-0-title\" x=\"0\" y=\"0\" fill-opacity=\"1\" fill=\"#333333\" text-anchor=\"middle\" transform=\"matrix(1,0,0,1,325.5,340)\" font-size=\"10px\" stroke=\"none\" style=\"fill-opacity: 1; fill: rgb(51, 51, 51); text-anchor: middle; font-size: 10px; stroke: none;\"><tspan dy=\"9.5\" x=\"0\">Quarter</tspan></text></g><g class=\"raphael-group-55-axis-lines\"><path d=\"M66,318.5L585,318.5\" stroke=\"#999999\" stroke-opacity=\"1\" stroke-width=\"1\" fill=\"none\" style=\"stroke: rgb(153, 153, 153); stroke-opacity: 1; fill: none;\"></path></g></g><g class=\"raphael-group-2-dataset\"><g class=\"raphael-group-57-columns\" clip-path=\"url('#E2B5B2DF-5726-463E-9904-B1F8596A3A56')\"><rect x=\"80.5\" y=\"231.5\" width=\"50\" height=\"87\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#0075c2\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(0, 117, 194); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect><rect x=\"210.5\" y=\"217.5\" width=\"50\" height=\"101\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#0075c2\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(0, 117, 194); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect><rect x=\"340.5\" y=\"209.5\" width=\"50\" height=\"109\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#0075c2\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(0, 117, 194); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect><rect x=\"470.5\" y=\"187.5\" width=\"50\" height=\"131\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#0075c2\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(0, 117, 194); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect><rect x=\"130.5\" y=\"97.5\" width=\"50\" height=\"221\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#1aaf5d\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(26, 175, 93); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect><rect x=\"260.5\" y=\"58.5\" width=\"50\" height=\"260\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#1aaf5d\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(26, 175, 93); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect><rect x=\"390.5\" y=\"128.5\" width=\"50\" height=\"190\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#1aaf5d\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(26, 175, 93); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect><rect x=\"520.5\" y=\"84.5\" width=\"50\" height=\"234\" rx=\"0\" ry=\"0\" fill-opacity=\"1\" fill=\"#1aaf5d\" stroke=\"#333333\" stroke-opacity=\"0\" stroke-width=\"1\" stroke-dasharray=\"0\" stroke-linejoin=\"miter\" style=\"fill-opacity: 1; fill: rgb(26, 175, 93); stroke: rgb(51, 51, 51); stroke-opacity: 0; stroke-linejoin: miter;\"></rect></g></g><g class=\"raphael-group-16-axistop\"><g class=\"raphael-group-17-x-axis-bands\"></g><g class=\"raphael-group-23-y-axis-bands\"></g><g class=\"raphael-group-29-y-axis-bands\"></g><g class=\"raphael-group-19-x-axis-lines\"></g><g class=\"raphael-group-25-y-axis-lines\"></g><g class=\"raphael-group-31-y-axis-lines\"></g><g class=\"fusioncharts-xaxis-0-gridlabels\"></g><g class=\"fusioncharts-yaxis-0-gridlabels\"></g><g class=\"fusioncharts-yaxis-1-gridlabels\"></g></g><g class=\"fusioncharts-datalabels\" transform=\"matrix(1,0,0,1,0,0)\"><text class=\"fusioncharts-label\" x=\"105.5\" y=\"249\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,-143.5,354.5)\"><tspan dy=\"3.5\" x=\"105.5\">$10K</tspan></text><text class=\"fusioncharts-label\" x=\"235.5\" y=\"239\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,-3.5,474.5)\"><tspan dy=\"3.5\" x=\"235.5\">$11.5K</tspan></text><text class=\"fusioncharts-label\" x=\"365.5\" y=\"231\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,134.5,596.5)\"><tspan dy=\"3.5\" x=\"365.5\">$12.5K</tspan></text><text class=\"fusioncharts-label\" x=\"495.5\" y=\"205\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,290.5,700.5)\"><tspan dy=\"3.5\" x=\"495.5\">$15K</tspan></text><text class=\"fusioncharts-label\" x=\"155.5\" y=\"119\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,36.5,274.5)\"><tspan dy=\"3.5\" x=\"155.5\">$25.4K</tspan></text><text class=\"fusioncharts-label\" x=\"285.5\" y=\"80\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,205.5,365.5)\"><tspan dy=\"3.5\" x=\"285.5\">$29.8K</tspan></text><text class=\"fusioncharts-label\" x=\"415.5\" y=\"150\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,265.5,565.5)\"><tspan dy=\"3.5\" x=\"415.5\">$21.8K</tspan></text><text class=\"fusioncharts-label\" x=\"545.5\" y=\"106\" fill-opacity=\"1\" fill=\"#ffffff\" font-size=\"10px\" stroke=\"none\" text-anchor=\"middle\" style=\"fill-opacity: 1; fill: rgb(255, 255, 255); font-size: 10px; stroke: none; text-anchor: middle;\" transform=\"matrix(0,-1,1,0,439.5,651.5)\"><tspan dy=\"3.5\" x=\"545.5\">$26.8K</tspan></text></g><g class=\"fusioncharts-legend\" transform=\"matrix(1,0,0,1,233.5,360.5)\"><rect x=\"0\" y=\"0\" width=\"184\" height=\"25\" rx=\"0\" ry=\"0\" stroke=\"#545454\" stroke-opacity=\"0\" stroke-width=\"1\" fill-opacity=\"0\" fill=\"#ffffff\" style=\"stroke: rgb(84, 84, 84); stroke-opacity: 0; fill-opacity: 0; fill: rgb(255, 255, 255);\"></rect><text class=\"fusioncharts-legenditem\" x=\"23\" y=\"6.5\" fill=\"#666666\" text-anchor=\"start\" font-size=\"10px\" stroke=\"none\" style=\"fill: rgb(102, 102, 102); text-anchor: start; cursor: pointer; font-size: 10px; stroke: none;\"><tspan dy=\"9.5\" x=\"23\">Previous Year</tspan></text><path d=\"M7,18L7,10.3L9.75,10.3L9.75,18ZM11.125,18L11.125,7L13.875,7L13.875,18ZM15.25,18L15.25,13.6L18,13.6L18,18Z\" stroke-width=\"0.5\" stroke=\"#66acda\" fill-opacity=\"1\" fill=\"#0075c2\" style=\"stroke: rgb(102, 172, 218); fill-opacity: 1; fill: rgb(0, 117, 194); cursor: pointer;\"></path><rect x=\"4\" y=\"4\" width=\"84\" height=\"17\" rx=\"0\" ry=\"0\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" stroke-width=\"1\" stroke=\"none\" style=\"fill-opacity: 0.000001; fill: rgb(192, 192, 192); stroke: none; cursor: pointer;\"></rect><text class=\"fusioncharts-legenditem\" x=\"117.85\" y=\"6.5\" fill=\"#666666\" text-anchor=\"start\" font-size=\"10px\" stroke=\"none\" style=\"fill: rgb(102, 102, 102); text-anchor: start; cursor: pointer; font-size: 10px; stroke: none;\"><tspan dy=\"9.5\" x=\"117.85\">Current Year</tspan></text><path d=\"M101.85,18L101.85,10.3L104.6,10.3L104.6,18ZM105.975,18L105.975,7L108.725,7L108.725,18ZM110.1,18L110.1,13.6L112.85,13.6L112.85,18Z\" stroke-width=\"0.5\" stroke=\"#76cf9e\" fill-opacity=\"1\" fill=\"#1aaf5d\" style=\"stroke: rgb(118, 207, 158); fill-opacity: 1; fill: rgb(26, 175, 93); cursor: pointer;\"></path><rect x=\"98.85\" y=\"4\" width=\"79\" height=\"17\" rx=\"0\" ry=\"0\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" stroke-width=\"1\" stroke=\"none\" style=\"fill-opacity: 0.000001; fill: rgb(192, 192, 192); stroke: none; cursor: pointer;\"></rect></g><g class=\"raphael-group-90-caption\"><text class=\"fusioncharts-caption\" fill=\"#333333\" x=\"325.5\" y=\"15\" text-anchor=\"middle\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: middle; stroke: none; font-family: 'helvetica neue', arial; font-size: 14px; font-weight: bold;\" font-family=\"Helvetica Neue,Arial\" font-size=\"14px\" font-weight=\"bold\"><tspan dy=\"13.7109375\" x=\"325.5\">Comparison of Quarterly Revenue</tspan></text><text class=\"fusioncharts-subcaption\" fill=\"#333333\" x=\"325.5\" y=\"33\" text-anchor=\"middle\" stroke=\"none\" style=\"fill: rgb(51, 51, 51); text-anchor: middle; stroke: none; font-family: 'helvetica neue', arial; font-size: 14px; font-weight: normal;\" font-family=\"Helvetica Neue,Arial\" font-size=\"14px\" font-weight=\"normal\"><tspan dy=\"13.5703125\" x=\"325.5\">Harry's SuperMart</tspan></text></g><g class=\"raphael-group-3-hot\"><rect x=\"80.5\" y=\"231.5\" width=\"50\" height=\"87\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect><rect x=\"210.5\" y=\"217.5\" width=\"50\" height=\"101\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect><rect x=\"340.5\" y=\"209.5\" width=\"50\" height=\"109\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect><rect x=\"470.5\" y=\"187.5\" width=\"50\" height=\"131\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect><rect x=\"130.5\" y=\"97.5\" width=\"50\" height=\"221\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect><rect x=\"260.5\" y=\"58.5\" width=\"50\" height=\"260\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect><rect x=\"390.5\" y=\"128.5\" width=\"50\" height=\"190\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect><rect x=\"520.5\" y=\"84.5\" width=\"50\" height=\"234\" rx=\"0\" ry=\"0\" stroke=\"#c0c0c0\" stroke-opacity=\"0.000001\" stroke-width=\"1\" fill-opacity=\"0.000001\" fill=\"#c0c0c0\" style=\"stroke: rgb(192, 192, 192); stroke-opacity: 0.000001; fill-opacity: 0.000001; fill: rgb(192, 192, 192);\"></rect></g><g class=\"raphael-group-6-buttons\" style=\"display: none;\"><g class=\"raphael-group-7-button\"><rect x=\"572.5\" y=\"6.5\" width=\"18\" height=\"17\" rx=\"2\" ry=\"2\" fill=\"url('#0-90-rgba_204_204_204_1__0-rgba_255_255_255_1__100')\" stroke=\"#bbbbbb\" stroke-width=\"1\" opacity=\"1\" fill-opacity=\"1\" stroke-opacity=\"1\" style=\"stroke: rgb(187, 187, 187); opacity: 1; fill-opacity: 1; stroke-opacity: 1;\"></rect><path d=\"M576.5,17.5L576.5,20.5L587.5,20.5L587.5,17.5L587.5,20.5L576.5,20.5ZM581.5,19.5L578.5,15L580.5,15L580.5,9.5L582.5,9.5L582.5,15L584.5,15Z\" fill=\"#ffffff\" stroke=\"#9a9a9a\" fill-opacity=\"1\" stroke-opacity=\"1\" stroke-width=\"1\" style=\"fill: rgb(255, 255, 255); stroke: rgb(154, 154, 154); fill-opacity: 1; stroke-opacity: 1;\"></path><rect x=\"572.5\" y=\"6.5\" width=\"18\" height=\"17\" rx=\"2\" ry=\"2\" fill=\"#c0c0c0\" stroke=\"#c0c0c0\" fill-opacity=\"0.000001\" stroke-opacity=\"0.000001\" stroke-width=\"1\" style=\"fill: rgb(192, 192, 192); stroke: rgb(192, 192, 192); fill-opacity: 0.000001; stroke-opacity: 0.000001; cursor: pointer;\"></rect></g></g><text x=\"6\" y=\"396\" stroke=\"none\" fill=\"#000000\" text-anchor=\"start\" style=\"stroke: none; fill: rgb(0, 0, 0); text-anchor: start; fill-opacity: 0.5; font-size: 9px; font-family: verdana, sans; cursor: pointer;\" fill-opacity=\"0.5\" font-size=\"9px\" font-family=\"Verdana,sans\"><tspan dy=\"-1.8203125\" x=\"6\">FusionCharts XT Trial</tspan></text></svg>", :stream_type=>"svg", :meta_bgColor=>"#ffffff", :meta_bgAlpha=>"1", :meta_DOMId=>"chartobject-1", :meta_width=>"600", :meta_height=>"400", :parameters=>"exportfilename=FusionCharts|exportformat=svg|exportaction=save|exportparameters=undefined" }
        route = { :use_route => 'fusioncharts_exporter_export' }

        @download_params = params1.merge(route)
        @save_params = params2.merge(route)
      end

      it "should ensure that the params are not nil" do
        post :index, @download_params

        expect(controller.params).not_to be(nil)
      end

      it "should download the svg image with the correct name" do
        post :index, @download_params

        expect(controller.headers['Content-Transfer-Encoding']).to eq("binary")
        expect(controller.headers['Content-Disposition']).to eq("attachment; filename=\"FusionCharts.svg\"")
      end

      it "should successfully save the svg image on the server" do
        post :index, @save_params

        expect(response.status).to be(200)
      end

      it "should return json response" do
        post :index, @save_params

        expect(controller.headers["Content-Type"]).to include("application/json")
      end

      it "should return success json response" do
        post :index, @save_params
        resp = { :success => true }.to_json

        expect(response.body).to eq(resp)
      end

    end

  end
end
